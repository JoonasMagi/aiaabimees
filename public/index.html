<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Plants</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<main>
    <h1>My Plants</h1>
    <div class="plant-list" id="plants-list">
        <!-- Taimede nimekiri renderdatakse siia -->
    </div>
    <button class="new-plant-btn">New plant</button>
</div>
    <div id="new-plant-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Add a New Plant</h2>
            <form>
                <label for="plant-name">Plant Name:</label>
                <input type="text" id="plant-name" name="plant-name" required>
                <br>
                <label for="plant-species">Species:</label>
                <input type="text" id="plant-species" name="plant-species" required>
                <br><br>
                <button type="submit" class="submit-button">Add Plant</button>
            </form>
        </div>
    </div>
</main>
<script>
    async function loadPlants() {
        try {
            const response = await fetch('/plants');
            const plants = await response.json();

            const plantsList = document.getElementById('plants-list');
            plantsList.innerHTML = '';

            plants.forEach(plant => {
                const plantItem = document.createElement('div');
                plantItem.className = 'plant-item';

                const plantImage = document.createElement('img');
                plantImage.src = plant.image_url || 'https://via.placeholder.com/50';
                plantImage.alt = `${plant.name} photo`;

                const plantInfo = document.createElement('div');
                plantInfo.className = 'plant-info';

                const plantName = document.createElement('div');
                plantName.className = 'plant-name';
                plantName.textContent = plant.name;

                const plantSpecies = document.createElement('div');
                plantSpecies.className = 'plant-species';
                plantSpecies.textContent = plant.species || 'Unknown species';

                plantInfo.appendChild(plantName);
                plantInfo.appendChild(plantSpecies);

                plantItem.appendChild(plantImage);
                plantItem.appendChild(plantInfo);

                plantsList.appendChild(plantItem);
            });
        } catch (error) {
            console.error('Error loading plants:', error);
        }
    }

    window.onload = loadPlants;
    // Modaali ja nupu elemendid
    const modal = document.getElementById('new-plant-modal');
    const openButton = document.querySelector('.new-plant-btn'); // Nupp "New Plant"
    const closeButton = document.querySelector('.close-button'); // Sulgemise nupp

    // Avab modaali
    openButton.addEventListener('click', () => {
        modal.style.display = 'block';
    });

    // Sulgeb modaali sulgemisnupust
    closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    // Sulgeb modaali, kui klikitakse vÃ¤ljaspool seda
    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    });

</script>
</body>
</html>
